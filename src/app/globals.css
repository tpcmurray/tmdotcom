@import "tailwindcss";

/* ─── DaVinci Parchment — Raw design tokens ──────────────────── */
:root {
  --bg-primary:    #F5F0E8;
  --bg-secondary:  #EDE7D9;
  --bg-card:       #FAF7F2;
  --text-primary:  #3E2F1C;
  --text-secondary:#6B5B4A;
  --text-muted:    #9A8B78;
  --accent:        #8B4513;
  --accent-hover:  #A0522D;
  --border:        #D4C9B8;
  --tag-bg:        #E8DFD0;
  --tag-text:      #5C4A35;
}

/* ─── Tailwind v4 theme mapping ──────────────────────────────── */
/*
 * --font-cormorant, --font-lora, --font-source-sans are injected
 * onto <html> by next/font/google in layout.tsx.
 *
 * Color naming convention (generates bg-*, text-*, border-* utilities):
 *   parchment       → --bg-primary
 *   parchment-deep  → --bg-secondary
 *   card            → --bg-card
 *   ink             → --text-primary
 *   ink-soft        → --text-secondary
 *   ink-muted       → --text-muted
 *   brown / brown-light → accent colours
 *   edge            → border colour
 *   chip / chip-ink → tag pill colours
 */
@theme inline {
  --color-parchment:      var(--bg-primary);
  --color-parchment-deep: var(--bg-secondary);
  --color-card:           var(--bg-card);
  --color-ink:            var(--text-primary);
  --color-ink-soft:       var(--text-secondary);
  --color-ink-muted:      var(--text-muted);
  --color-brown:          var(--accent);
  --color-brown-light:    var(--accent-hover);
  --color-edge:           var(--border);
  --color-chip:           var(--tag-bg);
  --color-chip-ink:       var(--tag-text);

  --font-heading: var(--font-cormorant), 'Cormorant Garamond', serif;
  --font-body:    var(--font-lora), 'Lora', serif;
  --font-meta:    var(--font-source-sans), 'Source Sans 3', sans-serif;
}

/* ─── Base styles ────────────────────────────────────────────── */
body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-lora), 'Lora', serif;
  min-height: 100vh;
}

/* Subtle paper grain texture overlay.
   Drop a 256×256 tileable noise PNG at public/textures/paper-grain.png.
   Without the image the site still looks correct — just without the texture. */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url('/textures/paper-grain.png');
  background-repeat: repeat;
  background-size: 256px 256px;
  opacity: 0.04;
  pointer-events: none;
  z-index: 9999;
}

/* ─── Typography ─────────────────────────────────────────────── */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
}

a {
  color: var(--accent);
  text-decoration: none;
}

a:hover {
  color: var(--accent-hover);
  text-decoration: underline;
}

/* ─── Essay prose styles ─────────────────────────────────────── */
.essay-body {
  font-family: var(--font-lora), 'Lora', serif;
  font-size: 17px;
  line-height: 1.85;
  color: var(--text-primary);
}

.essay-body p {
  margin-bottom: 20px;
}

.essay-body h2 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 26px;
  font-weight: 600;
  margin: 40px 0 16px;
  color: var(--text-primary);
}

.essay-body h3 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 22px;
  font-weight: 600;
  margin: 32px 0 12px;
  color: var(--text-primary);
}

.essay-body blockquote {
  border-left: 3px solid var(--border);
  padding-left: 20px;
  margin: 24px 0;
  color: var(--text-secondary);
  font-style: italic;
}

.essay-body img {
  max-width: 100%;
  border-radius: 4px;
  margin: 24px 0;
}

.essay-body ul,
.essay-body ol {
  padding-left: 1.5em;
  margin-bottom: 20px;
}

.essay-body li {
  margin-bottom: 4px;
}

.essay-body pre {
  background: var(--bg-secondary);
  padding: 1em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 24px 0;
}

.essay-body code {
  background: var(--bg-secondary);
  padding: 0.125em 0.25em;
  border-radius: 3px;
  font-size: 0.9em;
}

.essay-body a {
  color: var(--accent);
  text-decoration: underline;
}

.essay-body a:hover {
  color: var(--accent-hover);
}

@media (max-width: 640px) {
  .essay-body {
    font-size: 16px;
  }
}

/* ─── Editor styles ──────────────────────────────────────────── */
.editor-title-input {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 32px;
  font-weight: 700;
  color: var(--text-primary);
  border: none;
  background: transparent;
  outline: none;
  width: 100%;
  padding: 0;
  margin-bottom: 20px;
  line-height: 1.2;
}

.editor-title-input::placeholder {
  color: var(--text-muted);
}

.editor-toolbar {
  display: flex;
  gap: 2px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-bottom: none;
  border-radius: 4px 4px 0 0;
  flex-wrap: wrap;
  align-items: center;
}

.editor-toolbar-btn {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 13px;
  padding: 4px 8px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 3px;
  font-weight: 500;
}

.editor-toolbar-btn:hover {
  background: var(--bg-card);
}

.editor-toolbar-btn.active {
  background: var(--bg-card);
  color: var(--text-primary);
}

.editor-toolbar-divider {
  width: 1px;
  height: 20px;
  background: var(--border);
  margin: 0 6px;
}

.editor-body {
  border: 1px solid var(--border);
  border-radius: 0 0 4px 4px;
  padding: 24px;
  min-height: 400px;
  background: var(--bg-card);
}

.editor-body .tiptap {
  font-family: var(--font-lora), 'Lora', serif;
  font-size: 16px;
  line-height: 1.8;
  color: var(--text-primary);
  outline: none;
}

.editor-body .tiptap p {
  margin-bottom: 20px;
}

.editor-body .tiptap h1 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 32px;
  font-weight: 700;
  margin: 32px 0 16px;
}

.editor-body .tiptap h2 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 26px;
  font-weight: 600;
  margin: 40px 0 16px;
}

.editor-body .tiptap h3 {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 22px;
  font-weight: 600;
  margin: 32px 0 12px;
}

.editor-body .tiptap blockquote {
  border-left: 3px solid var(--border);
  padding-left: 20px;
  margin: 24px 0;
  color: var(--text-secondary);
  font-style: italic;
}

.editor-body .tiptap img {
  max-width: 100%;
  border-radius: 4px;
  margin: 24px 0;
}

.editor-body .tiptap ul,
.editor-body .tiptap ol {
  padding-left: 1.5em;
  margin-bottom: 20px;
}

.editor-body .tiptap li {
  margin-bottom: 4px;
}

.editor-body .tiptap pre {
  background: var(--bg-secondary);
  padding: 1em;
  border-radius: 4px;
  overflow-x: auto;
  margin: 24px 0;
}

.editor-body .tiptap code {
  background: var(--bg-secondary);
  padding: 0.125em 0.25em;
  border-radius: 3px;
  font-size: 0.9em;
}

.editor-body .tiptap a {
  color: var(--accent);
  text-decoration: underline;
}

/* Syntax highlighting for code blocks (lowlight) */
.editor-body .tiptap pre code .hljs-comment,
.editor-body .tiptap pre code .hljs-quote,
.essay-body pre code .hljs-comment,
.essay-body pre code .hljs-quote {
  color: var(--text-muted);
  font-style: italic;
}
.editor-body .tiptap pre code .hljs-keyword,
.editor-body .tiptap pre code .hljs-selector-tag,
.editor-body .tiptap pre code .hljs-built_in,
.essay-body pre code .hljs-keyword,
.essay-body pre code .hljs-selector-tag,
.essay-body pre code .hljs-built_in {
  color: #8B4513;
  font-weight: 600;
}
.editor-body .tiptap pre code .hljs-string,
.editor-body .tiptap pre code .hljs-attr,
.essay-body pre code .hljs-string,
.essay-body pre code .hljs-attr {
  color: #6B8E23;
}
.editor-body .tiptap pre code .hljs-number,
.editor-body .tiptap pre code .hljs-literal,
.essay-body pre code .hljs-number,
.essay-body pre code .hljs-literal {
  color: #B8860B;
}
.editor-body .tiptap pre code .hljs-title,
.editor-body .tiptap pre code .hljs-section,
.essay-body pre code .hljs-title,
.essay-body pre code .hljs-section {
  color: #A0522D;
}
.editor-body .tiptap pre code .hljs-type,
.editor-body .tiptap pre code .hljs-class .hljs-title,
.essay-body pre code .hljs-type,
.essay-body pre code .hljs-class .hljs-title {
  color: #8B6914;
}

/* Markdown textarea */
.editor-markdown-textarea {
  display: block;
  box-sizing: border-box;
  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.6;
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 0 0 4px 4px;
  padding: 24px;
  min-height: 400px;
  width: 100%;
  resize: vertical;
  outline: none;
  tab-size: 2;
}
.editor-markdown-textarea:focus {
  border-color: var(--accent);
}

.editor-body .tiptap p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  color: var(--text-muted);
  float: left;
  height: 0;
  pointer-events: none;
}

/* ─── Status badges ──────────────────────────────────────────── */
.status-badge {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 2px 8px;
  border-radius: 3px;
  display: inline-block;
}

.status-badge.draft {
  background: #FEF3C7;
  color: #92400E;
}

.status-badge.published {
  background: #D1FAE5;
  color: #065F46;
}

/* ─── Share form styles ─────────────────────────────────────── */
.share-url-display {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 14px;
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 10px 14px;
  word-break: break-all;
}

.share-form-group {
  margin-bottom: 20px;
}

.share-form-label {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  display: block;
  margin-bottom: 6px;
}

.share-form-input {
  font-family: var(--font-lora), 'Lora', serif;
  font-size: 16px;
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 10px 14px;
  width: 100%;
  outline: none;
}

.share-form-input:focus {
  border-color: var(--accent);
}

.share-form-textarea {
  font-family: var(--font-lora), 'Lora', serif;
  font-size: 15px;
  line-height: 1.7;
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 12px 14px;
  width: 100%;
  resize: vertical;
  outline: none;
}

.share-form-textarea:focus {
  border-color: var(--accent);
}

.share-success {
  text-align: center;
  padding: 48px 24px;
}

.share-success-icon {
  font-size: 48px;
  color: #065F46;
  margin-bottom: 12px;
}

.share-success-title {
  font-family: var(--font-cormorant), 'Cormorant Garamond', serif;
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.share-success-text {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 15px;
  color: var(--text-secondary);
  margin-bottom: 24px;
}

.share-success-actions {
  display: flex;
  gap: 16px;
  justify-content: center;
}

.share-success-link {
  font-family: var(--font-source-sans), 'Source Sans 3', sans-serif;
  font-size: 14px;
  font-weight: 600;
  color: var(--accent);
}

.share-success-link:hover {
  color: var(--accent-hover);
}
